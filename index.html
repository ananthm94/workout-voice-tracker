<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Workout Tracker</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  </head>
  <body>
    <div class="app">
      <!-- Screen 1: Home -->
      <section id="screen-home" class="screen active">
        <header class="screen-header">
          <h1>Workout Tracker</h1>
        </header>

        <div class="home-content">
          <div class="record-container">
            <button id="recordButton" class="record-btn">
              <span class="record-btn-inner">
                <span id="recordLabel">START<br>RECORDING</span>
              </span>
            </button>
            <p id="timer" class="timer">00:00</p>
          </div>

          <div class="notes-container">
            <textarea
              id="workoutNotes"
              class="notes-input"
              placeholder="Enter workout notes (e.g., chest day, focused on form)..."
              rows="3"
            ></textarea>
          </div>

          <div class="intensity-container">
            <label class="intensity-label">Intensity Level</label>
            <div class="intensity-selector" id="intensitySelector">
              <button class="intensity-btn" data-value="1">1</button>
              <button class="intensity-btn" data-value="2">2</button>
              <button class="intensity-btn selected" data-value="3">3</button>
              <button class="intensity-btn" data-value="4">4</button>
              <button class="intensity-btn" data-value="5">5</button>
            </div>
            <div class="intensity-labels">
              <span>Light</span>
              <span>Moderate</span>
              <span>Intense</span>
            </div>
          </div>

          <button id="saveLogBtn" class="primary-btn">SAVE LOG</button>
        </div>
      </section>

      <!-- Screen 2: Logs -->
      <section id="screen-logs" class="screen">
        <header class="screen-header">
          <h1>Workout Logs</h1>
        </header>

        <div class="logs-content">
          <ul id="logList" class="log-list"></ul>

          <div class="heatmap-section">
            <div class="heatmap-container">
              <div class="heatmap-view">
                <svg id="bodyFront" viewBox="0 0 200 400" class="body-svg">
                  <!-- Head -->
                  <ellipse cx="100" cy="30" rx="25" ry="28" class="body-part" id="head-front"/>
                  <!-- Neck -->
                  <rect x="90" y="55" width="20" height="15" class="body-part" id="neck-front"/>
                  <!-- Shoulders -->
                  <ellipse cx="55" cy="85" rx="18" ry="12" class="body-part muscle-part" data-muscle="shoulders" id="shoulders-left-front"/>
                  <ellipse cx="145" cy="85" rx="18" ry="12" class="body-part muscle-part" data-muscle="shoulders" id="shoulders-right-front"/>
                  <!-- Chest -->
                  <path d="M60 90 Q100 85 140 90 L140 130 Q100 140 60 130 Z" class="body-part muscle-part" data-muscle="chest" id="chest"/>
                  <!-- Core/Abs -->
                  <rect x="70" y="130" width="60" height="60" rx="8" class="body-part muscle-part" data-muscle="core" id="core"/>
                  <!-- Upper Arms (Biceps) -->
                  <rect x="35" y="90" width="22" height="50" rx="10" class="body-part muscle-part" data-muscle="biceps" id="biceps-left"/>
                  <rect x="143" y="90" width="22" height="50" rx="10" class="body-part muscle-part" data-muscle="biceps" id="biceps-right"/>
                  <!-- Forearms -->
                  <rect x="32" y="140" width="18" height="50" rx="8" class="body-part muscle-part" data-muscle="forearms" id="forearms-left-front"/>
                  <rect x="150" y="140" width="18" height="50" rx="8" class="body-part muscle-part" data-muscle="forearms" id="forearms-right-front"/>
                  <!-- Hands -->
                  <ellipse cx="41" cy="200" rx="10" ry="14" class="body-part" id="hand-left"/>
                  <ellipse cx="159" cy="200" rx="10" ry="14" class="body-part" id="hand-right"/>
                  <!-- Hips -->
                  <path d="M65 190 Q100 185 135 190 L130 210 Q100 220 70 210 Z" class="body-part" id="hips-front"/>
                  <!-- Upper Legs/Quads -->
                  <rect x="65" y="210" width="28" height="80" rx="12" class="body-part muscle-part" data-muscle="quads" id="quads-left"/>
                  <rect x="107" y="210" width="28" height="80" rx="12" class="body-part muscle-part" data-muscle="quads" id="quads-right"/>
                  <!-- Lower Legs/Calves -->
                  <rect x="68" y="295" width="22" height="70" rx="10" class="body-part muscle-part" data-muscle="calves" id="calves-left-front"/>
                  <rect x="110" y="295" width="22" height="70" rx="10" class="body-part muscle-part" data-muscle="calves" id="calves-right-front"/>
                  <!-- Feet -->
                  <ellipse cx="79" cy="375" rx="16" ry="8" class="body-part" id="foot-left"/>
                  <ellipse cx="121" cy="375" rx="16" ry="8" class="body-part" id="foot-right"/>
                </svg>
                <span class="heatmap-label">Front view</span>
              </div>
              <div class="heatmap-view">
                <svg id="bodyBack" viewBox="0 0 200 400" class="body-svg">
                  <!-- Head -->
                  <ellipse cx="100" cy="30" rx="25" ry="28" class="body-part" id="head-back"/>
                  <!-- Neck -->
                  <rect x="90" y="55" width="20" height="15" class="body-part" id="neck-back"/>
                  <!-- Shoulders -->
                  <ellipse cx="55" cy="85" rx="18" ry="12" class="body-part muscle-part" data-muscle="shoulders" id="shoulders-left-back"/>
                  <ellipse cx="145" cy="85" rx="18" ry="12" class="body-part muscle-part" data-muscle="shoulders" id="shoulders-right-back"/>
                  <!-- Upper Back -->
                  <path d="M60 90 Q100 85 140 90 L138 125 Q100 130 62 125 Z" class="body-part muscle-part" data-muscle="back" id="back-upper"/>
                  <!-- Lower Back -->
                  <rect x="68" y="125" width="64" height="45" rx="6" class="body-part muscle-part" data-muscle="back" id="back-lower"/>
                  <!-- Upper Arms (Triceps) -->
                  <rect x="35" y="90" width="22" height="50" rx="10" class="body-part muscle-part" data-muscle="triceps" id="triceps-left"/>
                  <rect x="143" y="90" width="22" height="50" rx="10" class="body-part muscle-part" data-muscle="triceps" id="triceps-right"/>
                  <!-- Forearms -->
                  <rect x="32" y="140" width="18" height="50" rx="8" class="body-part muscle-part" data-muscle="forearms" id="forearms-left-back"/>
                  <rect x="150" y="140" width="18" height="50" rx="8" class="body-part muscle-part" data-muscle="forearms" id="forearms-right-back"/>
                  <!-- Hands -->
                  <ellipse cx="41" cy="200" rx="10" ry="14" class="body-part" id="hand-left-back"/>
                  <ellipse cx="159" cy="200" rx="10" ry="14" class="body-part" id="hand-right-back"/>
                  <!-- Glutes -->
                  <ellipse cx="79" cy="200" rx="18" ry="16" class="body-part muscle-part" data-muscle="glutes" id="glutes-left"/>
                  <ellipse cx="121" cy="200" rx="18" ry="16" class="body-part muscle-part" data-muscle="glutes" id="glutes-right"/>
                  <!-- Hamstrings -->
                  <rect x="65" y="218" width="28" height="72" rx="12" class="body-part muscle-part" data-muscle="hamstrings" id="hamstrings-left"/>
                  <rect x="107" y="218" width="28" height="72" rx="12" class="body-part muscle-part" data-muscle="hamstrings" id="hamstrings-right"/>
                  <!-- Calves -->
                  <rect x="68" y="295" width="22" height="70" rx="10" class="body-part muscle-part" data-muscle="calves" id="calves-left-back"/>
                  <rect x="110" y="295" width="22" height="70" rx="10" class="body-part muscle-part" data-muscle="calves" id="calves-right-back"/>
                  <!-- Feet -->
                  <ellipse cx="79" cy="375" rx="16" ry="8" class="body-part" id="foot-left-back"/>
                  <ellipse cx="121" cy="375" rx="16" ry="8" class="body-part" id="foot-right-back"/>
                </svg>
                <span class="heatmap-label">Back view</span>
              </div>
            </div>
          </div>

          <div id="insightBox" class="insight-box">
            <p id="insightText">Analyzing your workout patterns...</p>
            <div id="weeklySummary" class="weekly-summary">
              <div class="weekly-summary-item">
                <span class="count" id="strengthCount">0</span>x üèãÔ∏è
              </div>
              <div class="weekly-summary-item">
                <span class="count" id="cardioCount">0</span>x ‚ù§Ô∏è
              </div>
              <div class="weekly-summary-item">
                <span class="count" id="flexibilityCount">0</span>x üßò
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Screen 3: Recommendations -->
      <section id="screen-recommendations" class="screen">
        <header class="screen-header">
          <h1>Today's Workout</h1>
        </header>

        <div class="recommendations-content">
          <!-- User State Sliders -->
          <div class="state-sliders">
            <div class="slider-group">
              <div class="slider-header">
                <label>Energy Level</label>
                <span class="slider-value" id="energyValue">50</span>
              </div>
              <input type="range" id="energySlider" class="state-slider" min="0" max="100" value="50" />
              <div class="slider-labels">
                <span>Exhausted</span>
                <span>Energized</span>
              </div>
            </div>
            <div class="slider-group">
              <div class="slider-header">
                <label>Rest Level</label>
                <span class="slider-value" id="restValue">50</span>
              </div>
              <input type="range" id="restSlider" class="state-slider" min="0" max="100" value="50" />
              <div class="slider-labels">
                <span>Need Rest</span>
                <span>Well Rested</span>
              </div>
            </div>
          </div>

          <div class="recommendation-card">
            <p class="recommendation-label">Recommended:</p>
            <h2 id="recommendationTitle">Full Body Strength</h2>
          </div>

          <div class="recommendation-actions">
            <button id="changeWorkoutBtn" class="secondary-btn">Change Workout</button>
            <button id="whyBtn" class="primary-btn">Why?</button>
          </div>

          <div id="explanationBox" class="explanation-box hidden">
            <h3>Why This Workout?</h3>
            <p id="explanationText">Based on your last few days of cardio and historical data, this workout is suggested for balanced strength.</p>
          </div>

          <!-- Tell Me More Component -->
          <div id="workoutDetailView" class="workout-detail-view">
            <button id="tellMeMoreBtn" class="detail-toggle-btn">
              <span>Tell Me More</span>
              <svg class="chevron-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"/>
              </svg>
            </button>
            <div id="detailContent" class="detail-content hidden">
              <div class="advice-box">
                <h4>üí° Training Advice</h4>
                <p id="adviceText">Loading advice based on your history...</p>
              </div>
              <div class="exercises-box">
                <h4>Example Exercises</h4>
                <ul id="exerciseList" class="exercise-list">
                  <li>Loading...</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Screen 4: Profile -->
      <section id="screen-profile" class="screen">
        <header class="screen-header">
          <h1>My Profile</h1>
        </header>

        <div class="profile-content">
          <div class="input-group">
            <label for="weightInput">Weight (kg)</label>
            <input type="number" id="weightInput" class="form-input" placeholder="70" min="20" max="300" step="0.1" />
          </div>

          <div class="input-group">
            <label for="heightInput">Height (cm)</label>
            <input type="number" id="heightInput" class="form-input" placeholder="170" min="100" max="250" />
          </div>

          <button id="calculateBmiBtn" class="primary-btn">Calculate BMI</button>

          <div id="bmiResult" class="bmi-result hidden">
            <h3>Your BMI</h3>
            <p id="bmiValue">22.5 (Normal Weight)</p>
          </div>

          <div class="chart-section">
            <div class="chart-section-header">
              <h3>Weekly History</h3>
              <div class="chart-toggle">
                <button class="chart-toggle-btn active" data-chart="weight">Weight</button>
                <button class="chart-toggle-btn" data-chart="sessions">Sessions</button>
              </div>
            </div>
            <div class="chart-container">
              <canvas id="weeklyChart"></canvas>
            </div>
          </div>
        </div>
      </section>

      <!-- Bottom Navigation -->
      <nav class="bottom-nav">
        <button class="nav-item active" data-screen="home">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
            <polyline points="9 22 9 12 15 12 15 22"/>
          </svg>
          <span class="nav-label">Home</span>
        </button>
        <button class="nav-item" data-screen="logs">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="8" y1="6" x2="21" y2="6"/>
            <line x1="8" y1="12" x2="21" y2="12"/>
            <line x1="8" y1="18" x2="21" y2="18"/>
            <line x1="3" y1="6" x2="3.01" y2="6"/>
            <line x1="3" y1="12" x2="3.01" y2="12"/>
            <line x1="3" y1="18" x2="3.01" y2="18"/>
          </svg>
          <span class="nav-label">Logs</span>
        </button>
        <button class="nav-item" data-screen="recommendations">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 18h6"/>
            <path d="M10 22h4"/>
            <path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7z"/>
          </svg>
          <span class="nav-label">Tips</span>
        </button>
        <button class="nav-item" data-screen="profile">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
          </svg>
          <span class="nav-label">Profile</span>
        </button>
      </nav>
    </div>

    <script src="supabaseClient.js"></script>
    <script src="app.js"></script>
  </body>
</html>
